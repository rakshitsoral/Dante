---
layout: default
---

<!-- Reading Progress Bar -->
<div id="reading-progress" class="fixed top-0 left-0 w-full h-1 z-[100]">
    <div id="progress-bar" class="h-full bg-gradient-to-r from-blue-500 to-purple-500 w-0 transition-all duration-150"></div>
</div>

<!-- Breadcrumb Navigation -->
<nav class="breadcrumb-wrapper w-full px-4 sm:px-6 pt-8 pb-4" aria-label="Breadcrumb">
    <div class="max-w-7xl mx-auto">
        <ol class="breadcrumb-list flex items-center flex-wrap gap-2 text-sm">
            <li class="breadcrumb-item">
                <a href="/" class="breadcrumb-link">Home</a>
            </li>
            <li class="breadcrumb-separator" aria-hidden="true">
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                </svg>
            </li>
            <li class="breadcrumb-item">
                <a href="/blog" class="breadcrumb-link">Blog</a>
            </li>
            {% if tags and tags.length > 0 and tags[0] != 'posts' %}
            <li class="breadcrumb-separator" aria-hidden="true">
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                </svg>
            </li>
            <li class="breadcrumb-item">
                <a href="/tags/{{ tags[0] | slug }}" class="breadcrumb-link capitalize">{{ tags[0] }}</a>
            </li>
            {% endif %}
            <li class="breadcrumb-separator" aria-hidden="true">
                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                </svg>
            </li>
            <li class="breadcrumb-item breadcrumb-current" aria-current="page">
                {{ title }}
            </li>
        </ol>
    </div>
</nav>

<article class="flex flex-col items-center">
    <div class="w-full h-8"></div>

    {% if featured_image %}
    <img src="{{ featured_image | url }}" loading="lazy" alt="{{ title }}" {% if featured_image_classes %}class="{{ featured_image_classes }}"{% endif %}>
    {% endif %}

    <!-- Main Content Area -->
    <div class="w-full px-4 sm:px-6">
        <!-- Mobile TOC (Collapsible) - Only visible on mobile -->
        <details id="toc-mobile" class="lg:hidden w-full max-w-3xl mx-auto mt-8 mb-6">
            <summary class="cursor-pointer border border-gray-700 rounded-lg bg-gray-900/50 p-4 list-none flex items-center justify-between">
                <span class="text-sm font-semibold text-gray-300 uppercase tracking-wide">What's in the blog?</span>
                <svg class="w-5 h-5 text-gray-400 transition-transform duration-200 toc-chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </summary>
            <div class="border border-t-0 border-gray-700 rounded-b-lg bg-gray-900/50 p-4 pt-0">
                <ul id="toc-list-mobile" class="space-y-2 text-sm mt-3"></ul>
            </div>
        </details>

        <!-- Desktop Layout with TOC -->
        <div class="relative max-w-7xl mx-auto">
            <div class="flex gap-8 xl:gap-12">
                <!-- Main Content -->
                <div class="writing w-full lg:max-w-3xl mx-auto">
                    <header class="py-12">
                        <h1 class="mb-6 text-4xl font-bold">{{ title }}</h1>
                        
                        <!-- Author and Meta Info Bar -->
                        <div class="author-meta-bar">
                            <div class="author-section">
                                <img src="/assets/img/Rakshit Soral.png" alt="Rakshit Soral" class="author-avatar">
                                <span class="author-name">Rakshit Soral</span>
                            </div>
                            
                            <div class="meta-divider"></div>
                            
                            <div class="meta-info">
                                <!-- Reading Time -->
                                {% if readingTime %}
                                <div class="meta-item">
                                    <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    <span>{{ readingTime }}</span>
                                </div>
                                {% endif %}
                                
                                <!-- Publication Date -->
                                <div class="meta-item">
                                    <svg class="meta-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                    </svg>
                                    <time datetime="{{ page.date | htmlDateString }}">{{ page.date | readableDate }}</time>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Updated Date (if exists) -->
                        {% if updated %}
                        <div class="updated-date">
                            <time datetime="{{ updated | htmlDateString }}">Updated on {{ updated | readableDate }}</time>
                        </div>
                        {% endif %}
                    </header>

                    <!-- Blog Content -->
                    <div id="article-content">
                        {{ content | safe }}
                    </div>
                </div>

                <!-- Desktop Sidebar - Share Bar + TOC (Hidden on Mobile & Tablet) -->
                <aside class="hidden lg:block lg:relative" style="width: 280px; flex-shrink: 0;">
                    <div class="sticky" style="top: 7rem;">
                        <!-- Static Share Bar -->
                        <div class="border border-700 rounded-lg bg-gray-900/50 p-5 mb-4">
                            <h2 class="text-sm font-semibold text-gray-300 uppercase tracking-wide mb-4">Show some love ðŸ©·</h2>
                            <div class="flex items-center gap-2 flex-wrap">
                                <a href="#" id="twitter-share-desktop" class="share-icon share-icon-twitter" aria-label="Share on Twitter" target="_blank" rel="noopener">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                                </a>
                                <a href="#" id="facebook-share-desktop" class="share-icon share-icon-facebook" aria-label="Share on Facebook" target="_blank" rel="noopener">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                                </a>
                                <a href="#" id="linkedin-share-desktop" class="share-icon share-icon-linkedin" aria-label="Share on LinkedIn" target="_blank" rel="noopener">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                                </a>
                                <a href="#" id="whatsapp-share-desktop" class="share-icon share-icon-whatsapp" aria-label="Share on WhatsApp" target="_blank" rel="noopener">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                                </a>
                                <button id="copy-link-desktop" class="share-icon share-icon-copy" aria-label="Copy link">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
                                </button>
                            </div>
                        </div>

                        <!-- Desktop TOC -->
                        <div id="toc-desktop">
                            <div class="border border-gray-700 rounded-lg bg-gray-900/50 p-5">
                                <h2 class="text-sm font-semibold text-gray-300 uppercase tracking-wide mb-4">What's in the blog?</h2>
                                <ul id="toc-list-desktop" class="space-y-2 text-sm max-h-[calc(100vh-28rem)] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent"></ul>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>

    <!-- Related Posts Section -->
    {% set relatedPosts = (collections.posts | reverse).slice(0, 6) %}
    {% if relatedPosts.length > 1 %}
    <section class="w-full max-w-6xl mx-auto px-4 sm:px-6 mt-20 mb-16">
        <h2 class="text-3xl font-bold mb-12 text-center related-articles-title">Related Articles</h2>
        
        <div class="relative">
            <!-- Navigation Arrows -->
            <button id="carousel-prev" class="carousel-nav carousel-nav-left" aria-label="Previous articles">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>
            <button id="carousel-next" class="carousel-nav carousel-nav-right" aria-label="Next articles">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </button>

            <!-- Carousel Container -->
            <div class="carousel-container overflow-hidden">
                <div id="carousel-track" class="carousel-track flex transition-transform duration-500 ease-in-out">
                    {% for post in relatedPosts %}
                        {% if post.url != page.url %}
                        <div class="carousel-slide flex-shrink-0 px-3">
                            <a href="{{ post.url | url }}" class="related-article-card block rounded-lg overflow-hidden transition-all duration-300 hover:shadow-xl">
                                <!-- Featured Image -->
                                <div class="related-article-image">
                                    {% if post.data.featured_image %}
                                    <img src="{{ post.data.featured_image | url }}" alt="{{ post.data.title }}" class="w-full h-full object-cover">
                                    {% else %}
                                    <div class="w-full h-full bg-gradient-to-br from-purple-900 to-pink-600 flex items-center justify-center">
                                        <svg class="w-16 h-16 text-white opacity-50" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    {% endif %}
                                </div>
                                
                                <!-- Card Content -->
                                <div class="related-article-content p-6">
                                    <h3 class="related-article-title text-lg font-semibold mb-3 line-clamp-2">
                                        {{ post.data.title }}
                                    </h3>
                                    <time class="related-article-date text-sm">
                                        {{ post.date | readableDate }}
                                    </time>
                                </div>
                            </a>
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

            <!-- Carousel Dots -->
            <div id="carousel-dots" class="flex justify-center gap-2 mt-8"></div>
        </div>
    </section>
    {% endif %}

    <!-- Author Section -->
    <section class="work-section work-section--misc max-w-4xl p-16 mt-24 flex items-start self-center relative sm:p-8 sm:mt-12 sm:flex-col-reverse">
        <div>
            <p>I enjoy <a href="/blog" class="link-misc">writing</a> about things I learn & I know,
            building scalable Digital Marketing campaigns, and learning a bit of
            <a href="https://github.com/rakshitsoral" class="link-misc">web development</a>, side-by-side.</p>
            <p class="mt-6">When not in front of a screen I like to listen music, play guitar,
            read books, and binge-watch anime/ series.</p>
        </div>
        <div class="img relative flex-shrink-0 ml-12 sm:ml-0 sm:mb-8">
            <img src="/assets/img/Rakshit Soral.png" alt="Rakshit Soral portrait"
            loading="lazy" height="275" width="275" class="z-10 relative transform -rotate-2">
        </div>
        <span class="curl3 absolute block bg-no-repeat sm:hidden" aria-hidden="true"></span>
    </section>
</article>

<style>
/* Breadcrumb styles - HubSpot Design */
.breadcrumb-wrapper {
    background-color: inherit;
}

.breadcrumb-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.breadcrumb-item {
    display: inline-flex;
    align-items: center;
}

.breadcrumb-link {
    color: #1f2937;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s ease;
}

.breadcrumb-link:hover {
    color: #000000;
    text-decoration: underline;
}

.breadcrumb-separator {
    color: #6b7280;
    display: inline-flex;
    align-items: center;
}

.breadcrumb-current {
    color: #1f2937;
    font-weight: 400;
}

/* Light mode breadcrumb */
html.light-mode .breadcrumb-link,
body.light-mode .breadcrumb-link {
    color: #1f2937 !important;
}

html.light-mode .breadcrumb-link:hover,
body.light-mode .breadcrumb-link:hover {
    color: #000000 !important;
}

html.light-mode .breadcrumb-current,
body.light-mode .breadcrumb-current {
    color: #1f2937 !important;
}

html.light-mode .breadcrumb-separator,
body.light-mode .breadcrumb-separator {
    color: #6b7280 !important;
}

/* Dark mode breadcrumb */
@media (prefers-color-scheme: dark) {
    .breadcrumb-link {
        color: #d1d5db;
    }
    
    .breadcrumb-link:hover {
        color: #ffffff;
    }
    
    .breadcrumb-current {
        color: #ffffff;
    }
    
    .breadcrumb-separator {
        color: #6b7280;
    }
}

/* Explicit dark mode when body/html has dark class */
html:not(.light-mode) .breadcrumb-link,
body:not(.light-mode) .breadcrumb-link {
    color: #d1d5db;
}

html:not(.light-mode) .breadcrumb-link:hover,
body:not(.light-mode) .breadcrumb-link:hover {
    color: #ffffff;
}

html:not(.light-mode) .breadcrumb-current,
body:not(.light-mode) .breadcrumb-current {
    color: #ffffff;
}

/* Author Meta Bar Styles */
.author-meta-bar {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    padding: 1.25rem 2rem;
    border-radius: 1rem;
    max-width: fit-content;
    flex-wrap: wrap;
}

.author-section {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.author-avatar {
    width: 3.5rem;
    height: 3.5rem;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid rgba(139, 92, 246, 0.3);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.author-name {
    font-size: 1.125rem;
    font-weight: 600;
    color: #8B5CF6;
}

.meta-divider {
    width: 1px;
    height: 2.5rem;
    background: rgba(139, 92, 246, 0.2);
}

.meta-info {
    display: flex;
    align-items: center;
    gap: 1.25rem;
    flex-wrap: wrap;
}

.meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9375rem;
    color: #6b7280;
}

.meta-icon {
    width: 1.25rem;
    height: 1.25rem;
    flex-shrink: 0;
    color: #8B5CF6;
}

.updated-date {
    margin-top: 1rem;
    font-size: 0.8125rem;
    color: #9ca3af;
    font-style: italic;
}

/* Light mode for author meta bar */
html.light-mode .author-meta-bar,


html.light-mode .author-name,
body.light-mode .author-name {
    color: #7C3AED !important;
}

html.light-mode .meta-item,
body.light-mode .meta-item {
    color: #4b5563 !important;
}

html.light-mode .meta-icon,
body.light-mode .meta-icon {
    color: #7C3AED !important;
}

html.light-mode .meta-divider,
body.light-mode .meta-divider {
    background: rgba(124, 58, 237, 0.2) !important;
}

html.light-mode .updated-date,
body.light-mode .updated-date {
    color: #6b7280 !important;
}

html.light-mode .author-avatar,
body.light-mode .author-avatar {
    border-color: rgba(124, 58, 237, 0.3) !important;
}

/* Dark mode for author meta bar */
@media (prefers-color-scheme: dark) {
    .author-name {
        color: #A78BFA;
    }
    
    .meta-item {
        color: #9ca3af;
    }
    
    .meta-icon {
        color: #A78BFA;
    }
    
    .meta-divider {
        background: rgba(167, 139, 250, 0.2);
    }
    
    .updated-date {
        color: #6b7280;
    }
    
    .author-avatar {
        border-color: rgba(167, 139, 250, 0.3);
    }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .author-meta-bar {
        padding: 1rem 1.5rem;
        gap: 1rem;
    }
    
    .author-avatar {
        width: 3rem;
        height: 3rem;
    }
    
    .author-name {
        font-size: 1rem;
    }
    
    .meta-divider {
        display: none;
    }
    
    .meta-info {
        gap: 1rem;
        justify-content: center;
        width: 100%;
    }
    
    .meta-item {
        font-size: 0.875rem;
    }
    
    .meta-icon {
        width: 1.125rem;
        height: 1.125rem;
    }
}

/* Share Icon Styles */
.share-icon {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    cursor: pointer;
    border: none;
    color: white;
}

.share-icon svg {
    color: white;
}

.share-icon-twitter {
    background-color: #000000;
}

.share-icon-twitter:hover {
    background-color: #1a1a1a;
    transform: translateY(-2px);
}

.share-icon-facebook {
    background-color: #1877f2;
}

.share-icon-facebook:hover {
    background-color: #0c63d4;
    transform: translateY(-2px);
}

.share-icon-linkedin {
    background-color: #0077b5;
}

.share-icon-linkedin:hover {
    background-color: #005885;
    transform: translateY(-2px);
}

.share-icon-whatsapp {
    background-color: #25d366;
}

.share-icon-whatsapp:hover {
    background-color: #1da851;
    transform: translateY(-2px);
}

.share-icon-copy {
    background-color: #4b5563;
}

.share-icon-copy:hover {
    background-color: #374151;
    transform: translateY(-2px);
}

/* Light mode share icons */
html.light-mode .share-icon-twitter,
body.light-mode .share-icon-twitter {
    background-color: #000000 !important;
}

html.light-mode .share-icon-facebook,
body.light-mode .share-icon-facebook {
    background-color: #1877f2 !important;
}

html.light-mode .share-icon-linkedin,
body.light-mode .share-icon-linkedin {
    background-color: #0077b5 !important;
}

html.light-mode .share-icon-whatsapp,
body.light-mode .share-icon-whatsapp {
    background-color: #25d366 !important;
}

html.light-mode .share-icon-copy,
body.light-mode .share-icon-copy {
    background-color: #6b7280 !important;
}

/* Collapsible TOC chevron rotation */
details[open] .toc-chevron {
    transform: rotate(180deg);
}

/* Hide default marker */
details summary::-webkit-details-marker {
    display: none;
}

/* Table of Contents Styles - Reference Design */
#toc-desktop .border,
#toc-mobile .border {
    background-color: #f5f3ed;
    border: none;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

#toc-desktop h2 {
    color: #1f2937;
    font-size: 0.875rem;
    font-weight: 600;
    letter-spacing: 0.025em;
    text-transform: none;
    margin-bottom: 1rem;
}

#toc-list-desktop,
#toc-list-mobile {
    list-style: none;
    padding: 0;
    margin: 0;
}

.toc-h2-item {
    margin-bottom: 0.75rem;
}

.toc-h2-wrapper {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.toc-toggle {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    color: #6b7280;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease, color 0.2s ease;
    flex-shrink: 0;
}

.toc-toggle:hover {
    color: #1f2937;
}

.toc-toggle.expanded {
    transform: rotate(90deg);
}

.toc-h2-link {
    flex: 1;
}

.toc-h3-list {
    list-style: none;
    padding-left: 1.5rem;
    margin-top: 0.5rem;
    margin-bottom: 0;
    max-height: 500px;
    overflow: hidden;
    transition: max-height 0.3s ease, opacity 0.3s ease;
    opacity: 1;
}

.toc-h3-list.collapsed {
    max-height: 0;
    opacity: 0;
    margin-top: 0;
}

.toc-h3-item {
    margin-bottom: 0.5rem;
}

.toc-link {
    display: block;
    color: #4b5563;
    text-decoration: none;
    font-size: 0.9rem;
    line-height: 1.5;
    transition: color 0.2s ease;
}

.toc-link:hover {
    color: #1f2937;
}

.toc-number {
    color: #6b7280;
    font-weight: 400;
    margin-right: 0.25rem;
}

/* Active TOC link highlight */
.toc-active {
    color: #1f2937 !important;
    font-weight: 500;
}

.toc-active .toc-number {
    color: #1f2937;
    font-weight: 500;
}

/* Mobile TOC styling */
#toc-mobile summary {
    background-color: #f5f3ed;
    border: none;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

#toc-mobile summary span {
    color: #1f2937;
    font-size: 0.875rem;
}

#toc-mobile .border-t-0 {
    background-color: #f5f3ed;
    border: none;
    border-top: 1px solid #e5e5e0 !important;
}

/* Dark mode TOC overrides */
@media (prefers-color-scheme: dark) {
    #toc-desktop .border,
    #toc-mobile .border,
    #toc-mobile summary,
    #toc-mobile .border-t-0 {
        background-color: #1f2937;
        border-color: #374151;
    }
    
    #toc-desktop h2,
    #toc-mobile summary span {
        color: #e5e7eb;
    }
    
    .toc-link {
        color: #9ca3af;
    }
    
    .toc-link:hover {
        color: #e5e7eb;
    }
    
    .toc-active {
        color: #ffffff !important;
    }
    
    .toc-number {
        color: #6b7280;
    }
    
    .toc-active .toc-number {
        color: #ffffff;
    }
    
    .toc-toggle {
        color: #6b7280;
    }
    
    .toc-toggle:hover {
        color: #e5e7eb;
    }
}

/* Light mode explicit */
html.light-mode #toc-desktop .border,
html.light-mode #toc-mobile .border,
body.light-mode #toc-desktop .border,
body.light-mode #toc-mobile .border {
    background-color: #f5f3ed !important;
    border: none !important;
}

html.light-mode #toc-mobile summary,
body.light-mode #toc-mobile summary {
    background-color: #f5f3ed !important;
    border: none !important;
}

html.light-mode #toc-desktop h2,
html.light-mode #toc-mobile summary span,
body.light-mode #toc-desktop h2,
body.light-mode #toc-mobile summary span {
    color: #1f2937 !important;
}

html.light-mode .toc-link,
body.light-mode .toc-link {
    color: #4b5563 !important;
}

html.light-mode .toc-link:hover,
body.light-mode .toc-link:hover {
    color: #1f2937 !important;
}

html.light-mode .toc-active,
body.light-mode .toc-active {
    color: #1f2937 !important;
}

/* Smooth scrollbar for TOC */
#toc-list-desktop::-webkit-scrollbar {
    width: 4px;
}
#toc-list-desktop::-webkit-scrollbar-track {
    background: transparent;
}
#toc-list-desktop::-webkit-scrollbar-thumb {
    background: #4b5563;
    border-radius: 2px;
}

/* Ensure desktop TOC only shows on large screens */
@media (max-width: 1023px) {
    aside {
        display: none !important;
    }
}

/* Force TOC to display on desktop */
@media (min-width: 1024px) {
    aside {
        display: block !important;
    }
    #toc-mobile {
        display: none !important;
    }
}

/* Related Articles Carousel Styles - Dark Mode (Default) */
.related-articles-title {
    color: #ffffff;
}

.carousel-container {
    position: relative;
    margin: 0 60px;
}

.carousel-track {
    display: flex;
    gap: 0;
}

.carousel-slide {
    width: 33.333%;
    min-width: 300px;
    box-sizing: border-box;
}

@media (max-width: 1024px) {
    .carousel-slide {
        width: 50%;
    }
}

@media (max-width: 640px) {
    .carousel-slide {
        width: 100%;
    }
    .carousel-container {
        margin: 0 40px;
    }
}

.related-article-card {
    background-color: #ffffff;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.related-article-card:hover {
    transform: translateY(-4px);
}

.related-article-image {
    width: 100%;
    height: 240px;
    overflow: hidden;
    background-color: #f3f4f6;
}

.related-article-content {
    background-color: #ffffff;
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.related-article-title {
    color: #1f2937;
    line-height: 1.4;
}

.related-article-date {
    color: #6b7280;
    display: block;
    margin-top: auto;
}

/* Navigation Arrows */
.carousel-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: #ef4444;
    color: white;
    border: none;
    border-radius: 4px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    transition: all 0.3s ease;
}

.carousel-nav:hover {
    background-color: #dc2626;
}

.carousel-nav:disabled {
    background-color: #9ca3af;
    cursor: not-allowed;
    opacity: 0.5;
}

.carousel-nav-left {
    left: 0;
}

.carousel-nav-right {
    right: 0;
}

/* Carousel Dots */
#carousel-dots button {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: #d1d5db;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
}

#carousel-dots button.active {
    background-color: #1f2937;
    transform: scale(1.2);
}

#carousel-dots button:hover {
    background-color: #9ca3af;
}

/* Light mode styles for related articles */
html.light-mode .related-articles-title,
body.light-mode .related-articles-title {
    color: #000000 !important;
}

html.light-mode .related-article-card,
body.light-mode .related-article-card {
    background-color: #ffffff !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

html.light-mode .related-article-card:hover,
body.light-mode .related-article-card:hover {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
}

html.light-mode .related-article-content,
body.light-mode .related-article-content {
    background-color: #ffffff !important;
}

html.light-mode .related-article-title,
body.light-mode .related-article-title {
    color: #1f2937 !important;
}

html.light-mode .related-article-date,
body.light-mode .related-article-date {
    color: #6b7280 !important;
}

/* Dark mode overrides */
@media (prefers-color-scheme: dark) {
    .related-article-card {
        background-color: #1f2937;
    }
    
    .related-article-content {
        background-color: #1f2937;
    }
    
    .related-article-title {
        color: #ffffff;
    }
    
    .related-article-date {
        color: #9ca3af;
    }
    
    #carousel-dots button.active {
        background-color: #ffffff;
    }
}

/* Underline effect */
.underline-green-500 {
    position: relative;
    text-decoration: none;
}

.underline-green-500::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background-color: #10b981;
    transition: width 0.3s ease;
}

.underline-green-500:hover::after {
    width: 100%;
}
</style>

<script>
(function() {
    // Reading Progress Bar
    function updateProgressBar() {
        const article = document.getElementById('article-content');
        if (!article) return;
        
        const articleRect = article.getBoundingClientRect();
        const articleTop = window.scrollY + articleRect.top;
        const articleHeight = article.offsetHeight;
        const windowHeight = window.innerHeight;
        const scrollPosition = window.scrollY;
        
        // Calculate progress relative to article
        const start = articleTop - windowHeight;
        const end = articleTop + articleHeight;
        const current = scrollPosition;
        
        let progress = 0;
        if (current > start) {
            progress = Math.min(((current - start) / (end - start)) * 100, 100);
        }
        
        document.getElementById('progress-bar').style.width = progress + '%';
    }
    
    window.addEventListener('scroll', updateProgressBar, { passive: true });
    updateProgressBar();

    // Social Share Logic
    const pageUrl = encodeURIComponent(window.location.href);
    const pageTitle = encodeURIComponent(document.title);
    
    // Desktop share buttons
    const twitterDesktop = document.getElementById('twitter-share-desktop');
    const facebookDesktop = document.getElementById('facebook-share-desktop');
    const linkedinDesktop = document.getElementById('linkedin-share-desktop');
    const whatsappDesktop = document.getElementById('whatsapp-share-desktop');
    const copyDesktop = document.getElementById('copy-link-desktop');
    
    if (twitterDesktop) twitterDesktop.href = `https://twitter.com/intent/tweet?url=${pageUrl}&text=${pageTitle}`;
    if (facebookDesktop) facebookDesktop.href = `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`;
    if (linkedinDesktop) linkedinDesktop.href = `https://www.linkedin.com/sharing/share-offsite/?url=${pageUrl}`;
    if (whatsappDesktop) whatsappDesktop.href = `https://wa.me/?text=${pageTitle}%20${pageUrl}`;
    
    if (copyDesktop) {
        copyDesktop.addEventListener('click', function(e) {
            e.preventDefault();
            navigator.clipboard.writeText(window.location.href).then(function() {
                const btn = e.currentTarget;
                const originalHTML = btn.innerHTML;
                btn.innerHTML = '<svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg><span class="text-sm text-white">Copied!</span>';
                setTimeout(function() { btn.innerHTML = originalHTML; }, 2000);
            });
        });
    }

    // Auto-generate TOC from h2 and h3 headings with collapsible H3s
    function generateTOC() {
        const articleContent = document.getElementById('article-content');
        const allHeadings = articleContent.querySelectorAll('h2, h3');
        const tocDesktop = document.getElementById('toc-list-desktop');
        const tocMobile = document.getElementById('toc-list-mobile');

        if (allHeadings.length === 0) {
            const desktopTocContainer = document.getElementById('toc-desktop');
            const mobileDetails = document.getElementById('toc-mobile');
            if (desktopTocContainer) desktopTocContainer.parentElement.style.display = 'none';
            if (mobileDetails) mobileDetails.style.display = 'none';
            return;
        }

        let h2Counter = 0;
        let currentH2ItemDesktop = null;
        let currentH2ItemMobile = null;
        let currentH3ListDesktop = null;
        let currentH3ListMobile = null;
        
        allHeadings.forEach((heading, index) => {
            if (!heading.id) {
                heading.id = 'heading-' + index + '-' + heading.textContent.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
            }

            const isH2 = heading.tagName === 'H2';
            
            if (isH2) {
                h2Counter++;
                
                // Desktop H2 TOC item
                const desktopItem = document.createElement('li');
                desktopItem.className = 'toc-h2-item';
                
                const desktopWrapper = document.createElement('div');
                desktopWrapper.className = 'toc-h2-wrapper';
                
                const desktopLink = document.createElement('a');
                desktopLink.href = '#' + heading.id;
                desktopLink.className = 'toc-link toc-h2-link';
                desktopLink.dataset.headingId = heading.id;
                
                const numberSpan = document.createElement('span');
                numberSpan.className = 'toc-number';
                numberSpan.textContent = h2Counter + '. ';
                desktopLink.appendChild(numberSpan);
                
                const textSpan = document.createElement('span');
                textSpan.textContent = heading.textContent;
                desktopLink.appendChild(textSpan);
                
                desktopWrapper.appendChild(desktopLink);
                desktopItem.appendChild(desktopWrapper);
                
                // Create collapsible H3 container for desktop
                currentH3ListDesktop = document.createElement('ul');
                currentH3ListDesktop.className = 'toc-h3-list collapsed';
                desktopItem.appendChild(currentH3ListDesktop);
                
                tocDesktop.appendChild(desktopItem);
                currentH2ItemDesktop = desktopItem;

                // Mobile H2 TOC item
                const mobileItem = document.createElement('li');
                mobileItem.className = 'toc-h2-item';
                
                const mobileWrapper = document.createElement('div');
                mobileWrapper.className = 'toc-h2-wrapper';
                
                const mobileLink = document.createElement('a');
                mobileLink.href = '#' + heading.id;
                mobileLink.className = 'toc-link toc-h2-link';
                
                const numberSpan2 = document.createElement('span');
                numberSpan2.className = 'toc-number';
                numberSpan2.textContent = h2Counter + '. ';
                mobileLink.appendChild(numberSpan2);
                
                const textSpanMobile = document.createElement('span');
                textSpanMobile.textContent = heading.textContent;
                mobileLink.appendChild(textSpanMobile);
                
                mobileWrapper.appendChild(mobileLink);
                mobileItem.appendChild(mobileWrapper);
                
                // Create collapsible H3 container for mobile
                currentH3ListMobile = document.createElement('ul');
                currentH3ListMobile.className = 'toc-h3-list collapsed';
                mobileItem.appendChild(currentH3ListMobile);
                
                tocMobile.appendChild(mobileItem);
                currentH2ItemMobile = mobileItem;
                
            } else if (heading.tagName === 'H3' && currentH3ListDesktop && currentH3ListMobile) {
                // Desktop H3 item
                const desktopH3Item = document.createElement('li');
                desktopH3Item.className = 'toc-h3-item';
                
                const desktopH3Link = document.createElement('a');
                desktopH3Link.href = '#' + heading.id;
                desktopH3Link.className = 'toc-link';
                desktopH3Link.dataset.headingId = heading.id;
                desktopH3Link.textContent = heading.textContent;
                
                desktopH3Item.appendChild(desktopH3Link);
                currentH3ListDesktop.appendChild(desktopH3Item);
                
                // Mobile H3 item
                const mobileH3Item = document.createElement('li');
                mobileH3Item.className = 'toc-h3-item';
                
                const mobileH3Link = document.createElement('a');
                mobileH3Link.href = '#' + heading.id;
                mobileH3Link.className = 'toc-link';
                mobileH3Link.textContent = heading.textContent;
                
                mobileH3Item.appendChild(mobileH3Link);
                currentH3ListMobile.appendChild(mobileH3Item);
            }
        });
        
        // Add toggle functionality to H2 items that have H3s
        document.querySelectorAll('#toc-list-desktop .toc-h2-item, #toc-list-mobile .toc-h2-item').forEach(h2Item => {
            const h3List = h2Item.querySelector('.toc-h3-list');
            if (h3List && h3List.children.length > 0) {
                const wrapper = h2Item.querySelector('.toc-h2-wrapper');
                const toggleBtn = document.createElement('button');
                toggleBtn.className = 'toc-toggle';
                toggleBtn.setAttribute('aria-label', 'Toggle subsections');
                toggleBtn.innerHTML = '<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>';
                
                toggleBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    h3List.classList.toggle('collapsed');
                    toggleBtn.classList.toggle('expanded');
                });
                
                wrapper.insertBefore(toggleBtn, wrapper.firstChild);
            }
        });

        // Smooth scroll for all TOC links
        document.querySelectorAll('#toc-list-desktop a, #toc-list-mobile a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').slice(1);
                const target = document.getElementById(targetId);
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    history.pushState(null, null, '#' + targetId);
                }
            });
        });

        // Active heading highlight on scroll (desktop only)
        function highlightActiveHeading() {
            // Only run on desktop
            if (window.innerWidth < 1024) return;
            
            const scrollPos = window.scrollY + 150;
            let activeId = null;

            allHeadings.forEach(heading => {
                if (heading.offsetTop <= scrollPos) {
                    activeId = heading.id;
                }
            });

            document.querySelectorAll('#toc-list-desktop a').forEach(link => {
                if (link.dataset.headingId === activeId) {
                    link.classList.add('toc-active');
                    
                    // If it's an H3, expand its parent H2 section
                    const parentH3List = link.closest('.toc-h3-list');
                    if (parentH3List && parentH3List.classList.contains('collapsed')) {
                        parentH3List.classList.remove('collapsed');
                        const toggleBtn = parentH3List.parentElement.querySelector('.toc-toggle');
                        if (toggleBtn) {
                            toggleBtn.classList.add('expanded');
                        }
                    }
                } else {
                    link.classList.remove('toc-active');
                }
            });
        }

        window.addEventListener('scroll', highlightActiveHeading, { passive: true });
        highlightActiveHeading();
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', generateTOC);
    } else {
        generateTOC();
    }

    // Carousel Navigation
    function initCarousel() {
        const track = document.getElementById('carousel-track');
        const slides = document.querySelectorAll('.carousel-slide');
        const prevBtn = document.getElementById('carousel-prev');
        const nextBtn = document.getElementById('carousel-next');
        const dotsContainer = document.getElementById('carousel-dots');
        
        if (!track || slides.length === 0) return;

        let currentIndex = 0;
        let slidesPerView = 3;
        
        // Calculate slides per view based on screen size
        function updateSlidesPerView() {
            if (window.innerWidth < 640) {
                slidesPerView = 1;
            } else if (window.innerWidth < 1024) {
                slidesPerView = 2;
            } else {
                slidesPerView = 3;
            }
        }
        
        updateSlidesPerView();
        
        const totalPages = Math.ceil(slides.length / slidesPerView);
        
        // Create dots
        for (let i = 0; i < totalPages; i++) {
            const dot = document.createElement('button');
            dot.setAttribute('aria-label', `Go to page ${i + 1}`);
            if (i === 0) dot.classList.add('active');
            dot.addEventListener('click', () => goToPage(i));
            dotsContainer.appendChild(dot);
        }
        
        function updateCarousel() {
            const slideWidth = slides[0].offsetWidth;
            track.style.transform = `translateX(-${currentIndex * slideWidth * slidesPerView}px)`;
            
            // Update dots
            const dots = dotsContainer.querySelectorAll('button');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentIndex);
            });
            
            // Update button states
            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex >= totalPages - 1;
        }
        
        function goToPage(page) {
            currentIndex = page;
            updateCarousel();
        }
        
        prevBtn.addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
                updateCarousel();
            }
        });
        
        nextBtn.addEventListener('click', () => {
            if (currentIndex < totalPages - 1) {
                currentIndex++;
                updateCarousel();
            }
        });
        
        // Update on window resize
        window.addEventListener('resize', () => {
            const oldSlidesPerView = slidesPerView;
            updateSlidesPerView();
            if (oldSlidesPerView !== slidesPerView) {
                currentIndex = 0;
                updateCarousel();
            }
        });
        
        updateCarousel();
    }
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initCarousel);
    } else {
        initCarousel();
    }
})();
</script>